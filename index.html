<!DOCTYPE html>
<!--
  OVERHEAD // LIVE AIRCRAFT TRACKER
  Single-file app — no server, no build step, no API keys.

  Flow: user types a location → geocode via OSM → query airplanes.live
        → filter to geofence → display flight data, map, photo → repeat every 15s

  Libraries: Leaflet.js (map), Google Fonts
  APIs: airplanes.live (ADS-B), Nominatim/OSM (geocoding),
        Planespotters.net (photos), CartoDB (map tiles)
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Overhead Tracker</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAMAEBAAAAEAIABoBAAANgAAACAgAAABACAAKBEAAJ4EAAAwMAAAAQAgAGgmAADGFQAAKAAAABAAAAAgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAABOAAAAVQAAAFUAAABVAAAAVQAAAFUAAABVAAAAVQAAAFUAAABVAAAAVQAAAE4AAAAHAAAAAAAAAAAAAAAUAAAA1gAAAOkAAADpAAAA6QAAAOkAAADpAAAA6QAAAOkAAADpAAAA6QAAAOkAAADWAAAAFAAAAAAAAAAAAAAAAgAAABQAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFgAAABYAAAAWAAAAFAAAAAIAAAAAAAAAAAAAAAAAAAAMAAAAHAAAABAAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAYAAAAN0AAAC9AAAAhgAAAFEAAAAuAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIQAAAMkAAADwAAAA8gAAAPoAAAD0AAAA1wAAALIAAACBAAAARwAAABkAAAALAAAAAwAAAAAAAAAAAAAAAAAAAFcAAACiAAAAQgAAAFYAAACQAAAAywAAAPwAAAD+AAAA+QAAAPAAAADXAAAAoAAAAGUAAAAiAAAAAAAAAAAAAAARAAAAFAAAAAAAAAAAAAAACQAAAIcAAAD8AAAA/QAAAOAAAADPAAAA7AAAAPYAAAD3AAAAhwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADIAAADdAAAA/QAAAM4AAABEAAAAFQAAADUAAABuAAAAlgAAAEcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAACbAAAA+AAAAMYAAAA7AAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAABLAAAA5QAAALwAAAAzAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAZQAAAKAAAAArAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAkAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAACAAAABAAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAkAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACwAAAAsAAAALAAAACQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbAAAAhQAAAJ8AAACfAAAAnwAAAJ8AAACfAAAAnwAAAJ8AAACfAAAAnwAAAJ8AAACfAAAAnwAAAJ8AAACfAAAAnwAAAJ8AAACfAAAAnwAAAJ8AAACfAAAAnwAAAJ8AAACFAAAAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAAADUAAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAANQAAAArAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAALAAAADUAAAA1AAAANQAAADUAAAA1AAAANQAAADUAAAA1AAAANQAAADUAAAA1AAAANQAAADUAAAA1AAAANQAAADUAAAA1AAAANQAAADUAAAA1AAAANQAAADUAAAAsAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAJAAAACsAAAArAAAAKwAAACsAAAArAAAAKwAAACsAAAArAAAAKwAAACsAAAArAAAAKwAAACsAAAArAAAAKwAAACsAAAArAAAAKwAAACsAAAArAAAAKwAAACsAAAAkAAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAGAAAACAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAACQAAAA1AAAALgAAACMAAAAbAAAAEwAAAAsAAAADAAAAAAAAAAAAAAAAAAAAAAAA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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAD4AAACmAAAA2wAAALwAAABsAAAAJAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAOAAAAHgAAACKAAAAXwAAABgAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAMAAAAGAAAABsAAAATAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAADAAAABgAAAAAQAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAEgAAADEAAABCAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABDAAAAQwAAAEMAAABCAAAAMQAAABIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAMwAAAIwAAAC9AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC/AAAAvwAAAL8AAAC9AAAAjAAAADMAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAARAAAALsAAAD8AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD8AAAAuwAAAEQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAQwAAALkAAAD5AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD8AAAA/AAAAPwAAAD5AAAAuQAAAEMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAMgAAAIoAAAC5AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC7AAAAuwAAALsAAAC5AAAAigAAADIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAEgAAADIAAABDAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABEAAAARAAAAEQAAABDAAAAMgAAABIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAABgAAAAYAAAADAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAEAAAABIAAAAMAAAABwAAAAQAAAACAAAAAgAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAAVAAAAOQAAAEsAAABIAAAAQgAAADkAAAAwAAAAKAAAACAAAAAXAAAADwAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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APwAAADsAAAAygAAAJgAAABWAAAAKAAAABAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAA4AAAA+AAAAlAAAAM8AAADuAAAA9gAAAOkAAADIAAAAlQAAAF4AAAAlAAAABgAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAADAAAACMAAABdAAAAuQAAAO4AAAD4AAAA6QAAAMIAAACNAAAATAAAACEAAAAMAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAEQAAADEAAABsAAAAwQAAAOgAAADhAAAAwQAAAIsAAABUAAAAHQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAEwAAADYAAABnAAAApgAAALwAAACnAAAAfwAAAEYAAAAeAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAADwAAACoAAABMAAAAdAAAAH0AAABoAAAARwAAABsAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAABAAAAAbAAAAKQAAAC0AAAAlAAAAGgAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAgAAAAIAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==">
  <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADZklEQVR4AeyUWahNURjH9zFPSeZZhpApJTyYiqIkmYlEvHhQHnjAgyTTgwclpXjAgymJEqFkKMMDGTJkLBkyyzzz+51N9t4d7XvvOZuS2/qdb621113ff33r+1al4C///ReQFoHK3FAdaAotoAFUgZK1NAE18NQNpsMcGAENQWGY4luagBwuqkEPGA1TYRy0Bb9himtpAj6x/UN4BfWgD4yH4dAZqkJRLU3AR3a/A6fgIlSHvjAFRkFrcK7C0UgT8A0HijiGPQKvwSQ0LybQnwltwGuqkIg0AewdfOXnHpyB0/AWakEHMClnYM0Rr6PcIsoiwCi8x8kVOADmxGes5dkRa3KOwfaCmuCe4vdWjHvCEHCN+eMVWs5MBYEL850y/NxlzVFQyEuszdBbERMZmBdGoh19E9SENVmnMZ4Ly2A5eG1Gj25cQI4Z69s7LiTMirjPmn1wE4yM/+N6HymvYzHzS2DNDxZgJ0M/UGhL7ADQYoJYBCyzLswaMh8burGmwzfMXAJz4gPWuRzWSDTHGt7BWE9vFEzQxozrgmu8yhv0n0G+RU/ahJlBMAmGgRvUx6rc+x1K39Lrj3UtJtZMQg/hN+/fPHnCimtwEvbCVtgBtyHfogJqM9MJxoL3ZJkNpD8SHM/HeoeGtTf9aP1/YezpXmAfgA4uYM2Zndh1YA54RY59W5gKYldwixmz3PB0pz8LVoEJ5POr02aMFapwnXoNluVT5q/CIdgAC2E2KHot1tP7kLnuHWNLGxMX4HNrhvvgPOerztpjLaVGWMNqkvowWRG+CZ5mNd8Wgacz+bbRPwznwWQ1cT2UQhXN9K/mSX6OvLNHDA7CZTDhPOFj+tdBh/uxW2AzbIrg3B7Gx8H/dR+vxCRl6vctKsBVOtXRCQa+fGexRmQXdj2sAMO7EqsIv3lKn2imyt+SArwbNzO089jOPDDpDO1uxufAzFao0fFtMKypJ+X/CrakABe5oVlq0ljzJqd1bwLp2O+uKwmFBHgaE8071JnjkjgrtElSgLXtO92VxVng3vpg+7AlBVhy1v52PmeBe+uD7cOWFKA6VWZxevd0b32E3vlNCvAptZ438i0L3FsfbB+2pADf8aV88hnNAvfWBy7ClhTgO+BbbbllgXvrI/TOb1IAU3+2/fsC0uL5HQAA///mTEFlAAAABklEQVQDACoS9UEOXzfUAAAAAElFTkSuQmCC">
  <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABP0lEQVR4AaTRvSt2YRgAcO9b79v7lhShjCaxGCQpRfLxBygWBisy25SFQUrEQP4AJEnExsjGYFAWYZDFx0C+fhc9R518PPF0/bruc+7ruu7nnPM754e/9IBf5v0nl1hLn0d6wB/lnUxSwZeRHnCv45RmxqkiXePWW6Q3H21tsUYdE9SSrnPrNd7buLY1zQk1xJBGuYhq+pmilZzMgHwXhWTiwGKeJyqZZZN1RuimgWRAi4sx4qR2eZgmIuJrlFiUck4Mjn8xY50M2HFRxhJxWo9cziGrxKkdchzQK89xRDLg2EU894W8yyhdRFN81kHrDc644YGXyLyD+HyL7tTTxhDL7HHJh5EZEPmfqjv+kke89WL5PfHCoyd5hAKF2+xnKWqjJxlwpXGAvixFbfQkA241rrCQpaiNnmSAvu/FMwAAAP//187BFAAAAAZJREFUAwASD0ohAdEElgAAAABJRU5ErkJggg==">
  <link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,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">
  <link href="lib/fonts.css" rel="stylesheet">
  <link rel="stylesheet" href="lib/leaflet.css"/>
  <script src="lib/leaflet.js"></script>
  <style>
    /* Include padding/border in element size calculations */
    *, *::before, *::after { box-sizing: border-box; }

    body.dotmatrix {
      /* Orange-on-black CRT colour palette */
      --c-main: #ffa600;
      --c-glow: #ff8000;
      --c-dim:  #7a5200;
      --c-bg:   #1a0a00;
      --c-overlay: rgba(26,10,0,0.65);
      --scanline-opacity: 0.05;

      background: var(--c-bg);
      color: var(--c-main);
      font-family: 'Share Tech Mono', monospace;
      font-size: clamp(0.85rem, 2.5vw, 1rem); /* fluid: scales between min/max */
      padding: 16px;
      max-width: 520px;
      margin: 0 auto;
      min-height: 100dvh; /* dvh accounts for mobile browser chrome */
    }

    /* CRT scanline overlay — fixed pseudo-element, passes clicks through */
    body.dotmatrix::after {
      content: '';
      position: fixed; inset: 0;
      background: repeating-linear-gradient(
        to bottom,
        transparent 0px, transparent 3px,
        rgba(0,0,0,var(--scanline-opacity)) 3px, rgba(0,0,0,var(--scanline-opacity)) 4px
      );
      pointer-events: none; z-index: 99;
    }

    body.dotmatrix hr { border-color: var(--c-main); opacity: 0.3; margin: 10px 0; }
    body.dotmatrix #counter { margin: 0 6px; }
    body.dotmatrix #error { color: var(--c-glow); word-break: break-all; font-size: 0.85rem; }

    /* Weather strip */
    #wx-strip {
      font-size: 0.7rem;
      letter-spacing: 0.04em;
      line-height: 1.7;
      opacity: 0.85;
      border-top: 1px solid rgba(255,166,0,0.15);
      margin-top: 4px;
      padding-top: 4px;
    }
    .wx-label { opacity: 0.4; margin-right: 6px; letter-spacing: 0.1em; }
    .wx-sep   { opacity: 0.3; margin: 0 5px; }

    /* Flight info block — left border changes colour with flight phase */
    #info-wrap {
      position: relative; /* needed so the altitude bar can sit inside */
      margin: 12px 0 6px;
      padding-left: 10px;
      border-left: 3px solid var(--c-main);
      transition: border-color 0.5s, box-shadow 0.5s;
      min-height: 120px;
    }
    #info-wrap.phase-landing    { border-color: #ff6060; box-shadow: -4px 0 12px rgba(255,96,96,0.3); }
    #info-wrap.phase-takeoff    { border-color: #60ff90; box-shadow: -4px 0 12px rgba(96,255,144,0.3); }
    #info-wrap.phase-climbing   { border-color: #60ff90; box-shadow: -4px 0 12px rgba(96,255,144,0.2); }
    #info-wrap.phase-descending { border-color: #ff9040; box-shadow: -4px 0 12px rgba(255,144,64,0.25); }
    #info-wrap.phase-approach   { border-color: #ffcc40; box-shadow: -4px 0 12px rgba(255,204,64,0.25); }

    /* Altitude bar — thin vertical strip on the right, fills bottom-to-top */
    #alt-bar-wrap {
      position: absolute; right: 0; top: 0; bottom: 0;
      width: 6px; background: rgba(255,166,0,0.1); border: 1px solid var(--c-dim);
    }
    #alt-bar-fill {
      position: absolute; bottom: 0; left: 0; right: 0;
      background: var(--c-main);
      transition: height 0.6s ease;
      box-shadow: 0 0 6px var(--c-glow);
    }

    /* ── Info block — structured rows for clean alignment ── */
    #info { font-size: clamp(0.85rem, 2.5vw, 0.95rem); padding-right: 14px; }
    .info-row {
      display: flex;
      align-items: baseline;
      line-height: 1.75;
    }
    .info-label {
      flex: 0 0 6.5em;           /* fixed column width — all values start here */
      font-size: 0.72em;
      opacity: 0.65;
      letter-spacing: 0.04em;
      white-space: nowrap;
    }
    .info-value {
      flex: 1;
      word-break: break-word;
    }
    .info-route {
      color: #a0d8ef;
    }

    #main { line-height: 1.8; margin-bottom: 12px; font-size: clamp(0.72rem, 2vw, 0.78rem); opacity: 0.85; }

    /* Buttons — equal-width flex row that wraps on narrow screens */
    #btn-row { display: flex; flex-wrap: wrap; gap: 6px; margin: 8px 0; }
    body.dotmatrix button {
      background: none; border: 1px solid var(--c-main); color: var(--c-main);
      font-family: 'Share Tech Mono', monospace; font-size: 0.82rem;
      padding: 10px 0; cursor: pointer;
      flex: 1 1 60px; text-align: center;
      min-height: 44px; /* minimum touch target */
      -webkit-tap-highlight-color: transparent;
    }
    body.dotmatrix button:hover, body.dotmatrix button:active {
      background: color-mix(in srgb, var(--c-main) 13%, transparent);
    }
    body.dotmatrix button.active {
      background: color-mix(in srgb, var(--c-main) 20%, transparent);
      border-color: var(--c-glow);
    }

    /* Location input row */
    #location-ctrl { display: flex; gap: 6px; align-items: stretch; margin: 10px 0 6px; }
    #location-input {
      background: none; border: 1px solid var(--c-main); color: var(--c-main);
      font-family: 'Share Tech Mono', monospace; font-size: 0.85rem;
      padding: 10px 8px; flex: 1; outline: none;
      min-height: 44px; -webkit-appearance: none;
    }
    #location-input::placeholder { color: var(--c-dim); }
    #location-ctrl button { flex: 0 0 auto; width: auto; padding: 10px 12px; }

    /* Sliders */
    .slider-ctrl { font-size: 0.75rem; opacity: 0.8; margin: 0 0 6px; display: flex; align-items: center; gap: 8px; }
    .slider-ctrl input[type=range] { flex: 1; accent-color: var(--c-main); cursor: pointer; height: 20px; }
    .slider-ctrl span:last-child { min-width: 52px; text-align: right; }

    /* Aircraft photo — hero-style, halftone dot overlay for texture */
    .photo-wrap { position: relative; display: block; margin-top: 10px; z-index: 0; border: 1px solid var(--c-dim); overflow: hidden; }
    .photo-wrap::after {
      content: ''; position: absolute; inset: 0; pointer-events: none; z-index: 1;
      background-image: radial-gradient(circle, rgba(0,0,0,0.25) 1px, transparent 1px);
      background-size: 3px 3px;
    }
    #dm-photo { display: block; width: 100%; height: clamp(140px, 35vw, 200px); object-fit: cover; object-position: center 30%; opacity: 0.9; }
    #dm-photo-credit { font-size: 0.6rem; opacity: 0.5; margin-top: 2px; }

    .blink { animation: blink 1s step-end infinite; }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

    /* Map */
    #dm-map { width: 100%; height: clamp(180px, 40vw, 240px); margin-top: 12px; border: 1px solid var(--c-dim); }
    #dm-map * { }
    .dm-callout {
      background: var(--c-bg); border: 1px solid var(--c-main); color: var(--c-main);
      font-family: 'Share Tech Mono', monospace; font-size: 11px; padding: 2px 5px;
      border-radius: 0; white-space: nowrap;
    }
    .dm-callout::before { display: none; }
    .leaflet-control-attribution { font-size: 9px; opacity: 0.6; background: transparent !important; color: #aaa !important; }
    .leaflet-control-attribution a { color: #aaa !important; }

    /* Footer: counter left, timer right */
    #footer-row { display: flex; align-items: center; justify-content: space-between; margin-top: 8px; font-size: 0.75rem; opacity: 0.7; }

    /* Session log — native <details> collapsible */
    #log-section { margin-top: 10px; }
    #log-section summary { cursor: pointer; font-size: 0.78rem; opacity: 0.7; padding: 4px 0; list-style: none; user-select: none; -webkit-user-select: none; }
    #log-section summary::-webkit-details-marker { display: none; }
    #log-section summary::before,
    #stats-section summary::before {
      content: '▶ ';
      display: inline-block;
      transition: transform 0.2s;
    }
    #log-section[open] > summary::before,
    #stats-section[open] > summary::before { transform: rotate(90deg); }
    #log-list { margin-top: 6px; max-height: 180px; overflow-y: auto; border: 1px solid var(--c-dim); padding: 6px 8px; font-size: 0.68rem; line-height: 1.9; opacity: 0.8; }
    #log-list::-webkit-scrollbar { width: 4px; }
    #log-list::-webkit-scrollbar-thumb { background: var(--c-dim); }
    #log-list { scrollbar-width: thin; scrollbar-color: var(--c-dim) transparent; }
    .log-entry { border-bottom: 1px solid rgba(255,166,0,0.1); padding: 1px 0; }
    .log-entry:last-child { border-bottom: none; }

    /* Fetching pulse — subtle border flicker on info-wrap while loading */
    #info-wrap.fetching { animation: fetch-pulse 0.8s ease-in-out infinite; }
    @keyframes fetch-pulse {
      0%, 100% { border-left-color: var(--c-main); }
      50%       { border-left-color: var(--c-dim); }
    }
    #fetch-dot {
      display: inline-block; width: 6px; height: 6px;
      background: var(--c-main); border-radius: 50%;
      margin-left: 6px; vertical-align: middle;
      opacity: 0;
      transition: opacity 0.2s;
    }
    #fetch-dot.active { opacity: 1; animation: fetch-pulse-dot 0.8s ease-in-out infinite; }
    @keyframes fetch-pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.2} }

    /* 2-column secondary data grid */
    #main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2px 16px;
      margin-bottom: 12px;
      font-size: clamp(0.72rem, 2vw, 0.78rem);
      line-height: 1.9;
    }
    #main-grid .data-item { display: flex; flex-direction: column; }
    #main-grid .data-label {
      font-size: 0.6rem;
      opacity: 0.45;
      letter-spacing: 0.06em;
    }
    #main-grid .data-value {
      font-size: 0.82rem;
    }

    /* ── Hover tooltips ── */
    [data-tip] {
      position: relative;
      cursor: help;
    }
    [data-tip]::after {
      content: attr(data-tip);
      position: absolute;
      bottom: calc(100% + 6px);
      left: 50%;
      transform: translateX(-50%);
      background: #1a0a00;
      border: 1px solid var(--c-main);
      color: var(--c-main);
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.65rem;
      padding: 5px 8px;
      white-space: pre-line;
      text-align: left;
      min-width: 160px;
      max-width: 240px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s;
      z-index: 999;
      line-height: 1.5;
      box-shadow: 0 0 12px rgba(255,166,0,0.2);
    }
    /* Arrow */
    [data-tip]::before {
      content: '';
      position: absolute;
      bottom: calc(100% + 1px);
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: var(--c-main);
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.15s;
      z-index: 999;
    }
    [data-tip]:hover::after,
    [data-tip]:hover::before,
    [data-tip]:focus::after,
    [data-tip]:focus::before,
    [data-tip]:focus-within::after,
    [data-tip]:focus-within::before { opacity: 1; }

    /* Tooltip anchored to the left edge on data items (avoids screen overflow) */
    .data-item[data-tip]::after { left: 0; transform: none; }
    .data-item[data-tip]::before { left: 12px; transform: none; }

    /* ── Colour-coded data values ── */
    .alt-ground  { color: #ff6060; }
    .alt-low     { color: #ffcc40; }
    .alt-mid     { color: var(--c-main); }
    .alt-high    { color: #60e8ff; }
    .alt-vhigh   { color: #a0a0ff; }

    .vs-climbing   { color: #60ff90; }
    .vs-descending { color: #ff6060; }
    .vs-level      { color: var(--c-main); }

    .spd-slow   { color: #ff4040; }
    .spd-normal { color: var(--c-main); }
    .spd-fast   { color: #60e8ff; }

    .dist-close  { color: #ff9040; }
    .dist-medium { color: var(--c-main); }
    .dist-far    { color: var(--c-dim); }

    /* ── Interesting flight badge ── */
    #interesting-badge {
      display: none;
      min-height: 1.4em;
      margin: 4px 0;
      padding: 4px 8px;
      border: 1px solid #ffee44;
      background: rgba(255,238,68,0.07);
      color: #ffee44;
      font-size: 0.72rem;
      letter-spacing: 0.04em;
    }
    #interesting-badge.visible { display: block; }

    /* ── Intercept timer ── */
    #intercept-wrap {
      margin: 4px 0 8px;
      font-size: 0.72rem;
      min-height: 1.2em;
    }
    #intercept-wrap .intercept-closing  { color: #ff9040; }
    #intercept-wrap .intercept-overhead { color: #60ff90; }
    #intercept-wrap .intercept-receding { color: var(--c-dim); }

    /* ── Keyboard help overlay ── */
    #kbd-overlay {
      display: none;
      position: fixed; inset: 0;
      background: rgba(26,10,0,0.92);
      z-index: 1100;
      align-items: center; justify-content: center;
    }
    #kbd-overlay.visible { display: flex; }
    #kbd-panel {
      border: 1px solid var(--c-main);
      background: var(--c-bg);
      padding: 20px 24px;
      max-width: 340px; width: 90%;
      box-shadow: 0 0 30px rgba(255,166,0,0.2);
    }
    #kbd-panel h3 {
      margin: 0 0 14px;
      font-size: 0.9rem;
      letter-spacing: 0.1em;
      border-bottom: 1px solid var(--c-dim);
      padding-bottom: 8px;
    }
    .kbd-row {
      display: flex; justify-content: space-between;
      font-size: 0.75rem; margin: 6px 0;
      opacity: 0.9;
    }
    .kbd-key {
      background: rgba(255,166,0,0.12);
      border: 1px solid var(--c-dim);
      padding: 2px 7px;
      font-size: 0.7rem;
      letter-spacing: 0.05em;
      min-width: 28px; text-align: center;
    }
    .kbd-desc { opacity: 0.7; text-align: right; }
    #kbd-close {
      margin-top: 16px; width: 100%;
      font-size: 0.75rem; padding: 8px;
    }

    /* ── Statistics panel ── */
    #stats-section { margin-top: 10px; }
    #stats-section summary {
      cursor: pointer; font-size: 0.78rem; opacity: 0.7;
      padding: 4px 0; list-style: none;
      user-select: none; -webkit-user-select: none;
    }
    #stats-section summary::-webkit-details-marker { display: none; }
    #stats-panel {
      margin-top: 8px;
      border: 1px solid var(--c-dim);
      padding: 10px 12px;
      font-size: 0.72rem;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px 16px;
      margin-bottom: 10px;
    }
    .stat-block { display: flex; flex-direction: column; gap: 2px; }
    .stat-label { font-size: 0.58rem; opacity: 0.45; letter-spacing: 0.06em; }
    .stat-value { font-size: 0.8rem; line-height: 1.3; }
    .stat-sub   { font-size: 0.62rem; opacity: 0.55; margin-top: 1px; }
    .stats-divider {
      border: none; border-top: 1px solid var(--c-dim);
      opacity: 0.4; margin: 8px 0;
    }
    #stats-empty { opacity: 0.4; font-size: 0.72rem; }

    /* Emergency squawk banner */
    #emerg-banner {
      display: none;
      margin: 8px 0;
      padding: 10px 12px;
      border: 2px solid #ff2020;
      background: rgba(255,0,0,0.08);
      color: #ff2020;
      font-size: 0.85rem;
      animation: emerg-flash 0.8s step-end infinite;
      cursor: pointer;
    }
    #emerg-banner.visible { display: block; }
    @keyframes emerg-flash {
      0%, 100% { border-color: #ff2020; background: rgba(255,0,0,0.08); }
      50%       { border-color: #ff6060; background: rgba(255,0,0,0.18); }
    }

    @media (prefers-reduced-motion: reduce) {
      .blink { animation: none; opacity: 1; }
      #info-wrap.fetching { animation: none; }
      #fetch-dot.active { animation: none; opacity: 1; }
      #emerg-banner { animation: none; }
      #alt-bar-fill { transition: none; }
      #info-wrap { transition: none; }
      #log-section summary::before,
      #stats-section summary::before { transition: none; }
    }
  </style>
</head>
<body class="dotmatrix">
  <div class="classic-layout">

    <!-- Title: location-display updated by JS on each location change -->
    <p>OVERHEAD // <span id="location-display">---</span><br>LIVE AIRCRAFT TRACKER ✈︎ <span class="blink">█</span><span id="fetch-dot"></span></p>
    <hr>

    <!-- Location input: any city, suburb, or address worldwide -->
    <div id="location-ctrl">
      <label for="location-input" style="position:absolute;width:1px;height:1px;overflow:hidden;clip-path:inset(50%);white-space:nowrap;">Location</label>
      <input id="location-input" value="" placeholder="City, suburb, address..." autocomplete="off">
      <button onclick="setLocation()">SET LOC</button>
    </div>

    <!-- GEOFENCE: search radius. Label updates live; API refreshes on next 15s cycle. -->
    <div class="slider-ctrl">
      <span id="geofence-lbl" data-tip="Search radius around your location.&#10;Only aircraft within this circle are shown.&#10;Larger = more results but slower.">GEOFENCE</span>
      <input type="range" id="geofence-slider" min="2" max="20" value="5" step="1" aria-labelledby="geofence-lbl" aria-describedby="geofence-label">
      <span id="geofence-label">5 KM</span>
    </div>

    <!-- ALT FLOOR: hide aircraft below this altitude -->
    <div class="slider-ctrl">
      <span id="altfloor-lbl" data-tip="Hide aircraft below this altitude.&#10;Useful to filter out ground vehicles&#10;and very low-level traffic.">ALT FLOOR</span>
      <input type="range" id="altfloor-slider" min="200" max="5000" value="500" step="100" aria-labelledby="altfloor-lbl" aria-describedby="altfloor-label">
      <span id="altfloor-label">500 FT</span>
    </div>

    <p id="error"></p>

    <!-- Weather strip — populated by fetchWeather(), hidden until data arrives -->
    <div id="wx-strip" style="display:none">
      <span class="wx-label">WX</span><span id="wx-temp"></span><span class="wx-sep">·</span><span id="wx-cond"></span><span class="wx-sep">·</span><span id="wx-wind"></span><span class="wx-sep">·</span><span id="wx-hum"></span><span class="wx-sep">·</span><span id="wx-uv"></span>
    </div>

    <!-- Emergency squawk banner — visible when any in-range flight squawks emergency -->
    <div id="emerg-banner" role="alert" aria-live="assertive" aria-atomic="true" onclick="dismissEmergency()"></div>

    <!-- Flight info: left border + altitude bar + primary/secondary data -->
    <div id="info-wrap">
      <div id="alt-bar-wrap"><div id="alt-bar-fill" style="height:0%"></div></div>
      <div id="info">LOADING...</div>
    </div>

    <div id="interesting-badge"></div>
    <div id="intercept-wrap"></div>
    <div id="main-grid">
      <div class="data-item" tabindex="0" data-tip="Barometric altitude above sea level.&#10;Red=below 1000ft  Yellow=1000–10000ft&#10;Amber=normal  Blue=above 35000ft"><span class="data-label">ALT</span><span class="data-value" id="d-alt">---</span></div>
      <div class="data-item" tabindex="0" data-tip="Ground speed in knots.&#10;1 kt ≈ 1.85 km/h&#10;Dim=slow  Amber=normal  Blue=fast (500kt+)"><span class="data-label">SPEED</span><span class="data-value" id="d-spd">---</span></div>
      <div class="data-item" tabindex="0" data-tip="Vertical speed in feet per minute.&#10;Green = climbing&#10;Red = descending&#10;Amber = level flight"><span class="data-label">V/SPEED</span><span class="data-value" id="d-vs">---</span></div>
      <div class="data-item" tabindex="0" data-tip="Ground track heading in degrees.&#10;0°=North  90°=East&#10;180°=South  270°=West"><span class="data-label">GND TRK</span><span class="data-value" id="d-hdg">---</span></div>
      <div class="data-item" tabindex="0" data-tip="Straight-line distance from your&#10;set location to the aircraft.&#10;Orange = very close (under 3km)"><span class="data-label">DIST LOC</span><span class="data-value" id="d-dist">---</span></div>
      <div class="data-item" tabindex="0" data-tip="Transponder squawk code.&#10;7700 = Emergency (MAYDAY)&#10;7600 = Radio failure (NORDO)&#10;7500 = Hijack  1200 = VFR"><span class="data-label">SQUAWK</span><span class="data-value" id="d-sqk">---</span></div>
    </div>

    <div id="dm-map" role="application" aria-label="Live flight map"></div>

    <!-- Aircraft photo — hidden until a photo is found -->
    <div class="photo-wrap" id="photo-wrap" style="display:none">
      <img id="dm-photo" alt="Aircraft photo">
    </div>
    <p id="dm-photo-credit"></p>

    <hr>

    <!-- PREV/NEXT: browse flights | NEAREST: jump to closest | SND: ping toggle | SHARE: copy URL -->
    <div id="btn-row">
      <button onclick="prev()" aria-label="Previous aircraft" data-tip="Show previous aircraft&#10;in the list (sorted by&#10;distance from you)">&#9664; PREV</button>
      <button onclick="next()" aria-label="Next aircraft" data-tip="Show next aircraft&#10;in the list (sorted by&#10;distance from you)">NEXT &#9654;</button>
      <button onclick="go(0)" aria-label="Jump to nearest aircraft" data-tip="Jump to the closest&#10;aircraft to your location">NEAREST</button>
      <button onclick="manualRefresh()" data-tip="Force a data refresh&#10;(auto-refreshes every 15s)">REFRESH</button>
      <button onclick="toggleSound()" id="sound-btn" data-tip="Toggle radar ping sound&#10;when a new closest aircraft&#10;is detected">[OFF] SND</button>
      <button onclick="shareUrl()" data-tip="Copy a shareable link&#10;with your current location&#10;pre-filled">&#x2197; SHARE</button>
      <button onclick="showKbdHelp()" data-tip="Show keyboard shortcuts">? HELP</button>
    </div>

    <!-- Keyboard shortcut overlay -->
    <div id="kbd-overlay" aria-hidden="true" onclick="hideKbdHelp()">
      <div id="kbd-panel" role="dialog" aria-modal="true" aria-labelledby="kbd-panel-title" onclick="event.stopPropagation()">
        <h3 id="kbd-panel-title">⌨ KEYBOARD SHORTCUTS</h3>
        <div class="kbd-row"><span class="kbd-key">←</span><span class="kbd-desc">Previous aircraft</span></div>
        <div class="kbd-row"><span class="kbd-key">→</span><span class="kbd-desc">Next aircraft</span></div>
        <div class="kbd-row"><span class="kbd-key">Home</span><span class="kbd-desc">Jump to nearest</span></div>
        <div class="kbd-row"><span class="kbd-key">R</span><span class="kbd-desc">Manual refresh</span></div>
        <div class="kbd-row"><span class="kbd-key">S</span><span class="kbd-desc">Toggle sound</span></div>
        <div class="kbd-row"><span class="kbd-key">?</span><span class="kbd-desc">Show / hide this help</span></div>
        <div class="kbd-row"><span class="kbd-key">Esc</span><span class="kbd-desc">Close this panel</span></div>
        <div class="kbd-row" style="margin-top:10px;opacity:0.45;font-size:0.65rem;justify-content:center;">Click outside or press Esc to close</div>
        <button id="kbd-close" onclick="hideKbdHelp()">CLOSE</button>
      </div>
    </div>

    <div id="footer-row">
      <span id="counter"></span>
      <span id="proxy-status" style="font-size:0.65rem;opacity:0.7;letter-spacing:0.03em;"></span>
      <span id="refresh-timer"></span>
    </div>

    <!-- Session log: collapsible, populated by JS, newest entries first -->
    <details id="log-section">
      <summary>SESSION LOG (<span id="log-count" aria-live="polite">0</span> FLIGHTS)</summary>
      <div id="log-list"><span style="opacity:0.4">No flights recorded yet.</span></div>
    </details>

    <!-- Statistics panel: collapsible, updated on each fetch -->
    <details id="stats-section">
      <summary>SESSION STATS</summary>
      <div id="stats-panel">
        <span id="stats-empty">No data yet — stats build up as flights are tracked.</span>
        <div id="stats-content" style="display:none">
          <div class="stats-grid">
            <div class="stat-block">
              <span class="stat-label">TOTAL SEEN</span>
              <span class="stat-value" id="st-total">0</span>
            </div>
            <div class="stat-block">
              <span class="stat-label">CURRENTLY IN RANGE</span>
              <span class="stat-value" id="st-active">0</span>
            </div>
            <div class="stat-block">
              <span class="stat-label">BUSIEST AIRLINE</span>
              <span class="stat-value" id="st-airline">---</span>
              <span class="stat-sub" id="st-airline-sub"></span>
            </div>
            <div class="stat-block">
              <span class="stat-label">MOST COMMON TYPE</span>
              <span class="stat-value" id="st-type">---</span>
              <span class="stat-sub" id="st-type-sub"></span>
            </div>
          </div>
          <hr class="stats-divider">
          <div class="stats-grid">
            <div class="stat-block">
              <span class="stat-label">HIGHEST ALTITUDE</span>
              <span class="stat-value" id="st-maxalt">---</span>
              <span class="stat-sub" id="st-maxalt-sub"></span>
            </div>
            <div class="stat-block">
              <span class="stat-label">FASTEST AIRCRAFT</span>
              <span class="stat-value" id="st-maxspd">---</span>
              <span class="stat-sub" id="st-maxspd-sub"></span>
            </div>
            <div class="stat-block">
              <span class="stat-label">CLOSEST APPROACH</span>
              <span class="stat-value" id="st-closest">---</span>
              <span class="stat-sub" id="st-closest-sub"></span>
            </div>
            <div class="stat-block">
              <span class="stat-label">INTERESTING FLIGHTS</span>
              <span class="stat-value" id="st-interesting">0</span>
            </div>
          </div>
        </div>
      </div>
    </details>

  </div>

  <script>
    // ── Constants & state ────────────────────────────────────────────

    let geofenceKm = 5;   // search radius, set by slider
    let altFloorFt = 500; // minimum altitude filter, set by slider

    // Converts geofence km → nautical miles for the API, with 4× buffer.
    // We then filter precisely with haversineKm on the results.
    function apiRadiusNm() { return Math.ceil((geofenceKm / 1.852) * 4); }

    let locationName = '';
    let locationLat  = 0, locationLon = 0;

    let flights = [], flightIndex = 0;
    let fetchController = null; // AbortController — cancels stale requests

    function timeoutSignal(ms) {
      return typeof AbortSignal.timeout === 'function' ? AbortSignal.timeout(ms) : undefined;
    }


    // ── Theme ────────────────────────────────────────────────────────
    // Colours live here so they can be applied to both CSS vars and Leaflet layers.

    const THEMES = {
      orange: { main: '#ffa600', glow: '#ff8000', dim: '#7a5200', bg: '#1a0a00', overlay: 'rgba(26,10,0,0.65)', acMarker: '#e8e820' },
    };
    let currentTheme = 'orange';

    function applyTheme(name) {
      const t = THEMES[name];
      const b = document.body;
      b.style.setProperty('--c-main', t.main);
      b.style.setProperty('--c-glow', t.glow);
      b.style.setProperty('--c-dim',  t.dim);
      b.style.setProperty('--c-bg',   t.bg);
      b.style.setProperty('--c-overlay', t.overlay);
      if (geofenceCircle) geofenceCircle.setStyle({ color: t.main, fillColor: t.main });
      if (acLine)         acLine.setStyle({ color: t.main });
      currentTheme = name;
    }


    // ── Startup: URL param + localStorage restore ────────────────────
    // If ?location= is in the URL (from SHARE), pre-fill the input.
    (function () {
      try {
        const s = new URLSearchParams(window.location.search).get('location');
        if (s) document.getElementById('location-input').value = s;
      } catch(e) {}
    })();

    // Restore last location from localStorage (URL param takes precedence).
    (function () {
      try {
        const params = new URLSearchParams(window.location.search);
        if (!params.get('location')) {
          const saved = localStorage.getItem('location');
          if (saved) {
            const { name, lat, lon } = JSON.parse(saved);
            locationName = name.toUpperCase();
            locationLat  = lat;
            locationLon  = lon;
            document.getElementById('location-input').value = name;
            document.getElementById('location-display').textContent = locationName;
          }
        }
      } catch(e) {}
    })();


    // ── Haversine distance ───────────────────────────────────────────
    // Great-circle distance between two lat/lon points, in km.
    function haversineKm(lat1, lon1, lat2, lon2) {
      const R = 6371, dLat = (lat2-lat1)*Math.PI/180, dLon = (lon2-lon1)*Math.PI/180;
      const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180)*Math.cos(lat2*Math.PI/180)*Math.sin(dLon/2)**2;
      return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    }


    // ── Lookup tables ────────────────────────────────────────────────

    // ICAO callsign prefix → airline name (e.g. "QFA001" → "QANTAS")
    const AIRLINE_DB = {
      QFA:'QANTAS',         VOZ:'VIRGIN AUSTRALIA', JST:'JETSTAR',
      RXA:'REX',            NWL:'NETWORK AVIATION',
      UAE:'EMIRATES',       ETD:'ETIHAD',            QTR:'QATAR AIRWAYS',
      SIA:'SINGAPORE AIR',  MAS:'MALAYSIA AIRLINES', CPA:'CATHAY PACIFIC',
      ANZ:'AIR NEW ZEALAND',FJI:'FIJI AIRWAYS',      THA:'THAI AIRWAYS',
      THY:'TURKISH AIRLINES',GIA:'GARUDA',           PAL:'PHILIPPINE AIR',
      AIQ:'THAI AIRASIA X', XAX:'AIRASIA X',         VNA:'VIETNAM AIRLINES',
      EVA:'EVA AIR',        CCA:'AIR CHINA',         CSN:'CHINA SOUTHERN',
      CES:'CHINA EASTERN',  KAL:'KOREAN AIR',        AAR:'ASIANA',
      ANA:'ANA',            JAL:'JAPAN AIRLINES',    AAL:'AMERICAN AIRLINES',
      UAL:'UNITED AIRLINES',DAL:'DELTA AIR LINES',   ACA:'AIR CANADA',
      BAW:'BRITISH AIRWAYS',AFR:'AIR FRANCE',        DLH:'LUFTHANSA',
      HAL:'HAWAIIAN AIRLINES',
      // Cargo carriers
      UPS:'UPS AIRLINES',  FDX:'FEDEX EXPRESS',  GTI:'ATLAS AIR',
      CLX:'CARGOLUX',      GEC:'LUFTHANSA CARGO', DHK:'DHL AIR',
      TAY:'TNT AIRWAYS',   QXE:'QANTAS FREIGHT',
      // Australian specialty / charter
      FDM:'RFDS',          FDQ:'RFDS QUEENSLAND', NJT:'NETJETS',
      PEL:'PEL-AIR',       CAV:'COBHAM AVIATION', HND:'HINTERLAND AVIATION',
    };
    function airlineFromCallsign(cs) {
      if (!cs || cs === '---') return '---';
      const prefix = cs.match(/^[A-Z]+/)?.[0] || '';
      return AIRLINE_DB[prefix] || prefix || '---';
    }


    // ADS-B emitter category codes → plain English
    const CATEGORY_DB = {
      A1:'LIGHT', A2:'SMALL', A3:'LARGE', A4:'B757 CLASS', A5:'HEAVY',
      A6:'HIGH PERF', A7:'ROTORCRAFT', B1:'GLIDER', B2:'AIRSHIP',
      B4:'SKYDIVER', B6:'UAV', B7:'SPACECRAFT', C1:'GROUND VEH',
    };

    // ICAO type codes → full model names (e.g. "B789" → "B787-9")
    const AIRCRAFT_TYPE_DB = {
      B737:'B737-700', B738:'B737-800', B739:'B737-900', B73X:'B737-900ER',
      B37M:'B737 MAX 7', B38M:'B737 MAX 8', B39M:'B737 MAX 9', B3XM:'B737 MAX 10',
      B752:'B757-200', B753:'B757-300',
      B762:'B767-200', B763:'B767-300', B764:'B767-400',
      B772:'B777-200', B77L:'B777-200LR', B773:'B777-300', B77W:'B777-300ER',
      B778:'B777X-8',  B779:'B777X-9',
      B788:'B787-8',   B789:'B787-9',   B78X:'B787-10',
      B712:'B717-200', B721:'B727-100', B722:'B727-200',
      B741:'B747-100', B742:'B747-200', B743:'B747-300', B744:'B747-400', B748:'B747-8',
      A318:'A318', A319:'A319', A320:'A320', A321:'A321',
      A19N:'A319neo', A20N:'A320neo', A21N:'A321neo', A21X:'A321XLR',
      A332:'A330-200', A333:'A330-300', A338:'A330-800neo', A339:'A330-900neo',
      A342:'A340-200', A343:'A340-300', A345:'A340-500', A346:'A340-600',
      A359:'A350-900', A35K:'A350-1000',
      A380:'A380', A388:'A380-800',
      E170:'E170', E175:'E175', E190:'E190', E195:'E195',
      E75L:'E175-E2', E290:'E190-E2', E295:'E195-E2',
      CRJ2:'CRJ-200', CRJ7:'CRJ-700', CRJ9:'CRJ-900', CRJX:'CRJ-1000',
      DH8A:'DASH 8-100', DH8B:'DASH 8-200', DH8C:'DASH 8-300', DH8D:'DASH 8-400',
      AT43:'ATR 42-300', AT45:'ATR 42-500', AT72:'ATR 72-200', AT75:'ATR 72-500', AT76:'ATR 72-600',
      BCS1:'A220-100', BCS3:'A220-300',
      SF34:'SAAB 340', SB20:'SAAB 2000', JS41:'JETSTREAM 41',
      PC12:'PILATUS PC-12', C208:'CESSNA CARAVAN',
      GL5T:'GULFSTREAM G550', GLEX:'GLOBAL EXPRESS', GLF6:'GULFSTREAM G650',
      C25A:'CITATION CJ2', C25B:'CITATION CJ3', C68A:'CITATION SOVEREIGN',
      FA7X:'FALCON 7X', FA8X:'FALCON 8X',
      C130:'C-130 HERCULES', C17:'C-17 GLOBEMASTER', P8:'P-8 POSEIDON',
      EC35:'H135', EC45:'H145', S76:'SIKORSKY S-76', AS32:'SUPER PUMA',
      B06:'BELL 206', B407:'BELL 407',
    };

    // Combines type code + emitter category into one readable string.
    // e.g. type="B789", category="A5" → "B787-9 (HEAVY)"
    function formatType(t, category) {
      const typeCode = (t || '').toUpperCase();
      const cat      = (category || '').toUpperCase();
      const fullName = AIRCRAFT_TYPE_DB[typeCode];
      const catLabel = CATEGORY_DB[cat];
      let typeStr;
      if (fullName && catLabel) typeStr = fullName + ' (' + catLabel + ')';
      else if (fullName)        typeStr = fullName;
      else if (typeCode && catLabel) typeStr = typeCode + ' (' + catLabel + ')';
      else if (typeCode)        typeStr = typeCode;
      else if (catLabel)        typeStr = catLabel;
      else                      typeStr = cat || '---';
      return typeStr;
    }


    // ── Formatting helpers ───────────────────────────────────────────

    // Emergency squawk codes — displayed in red with ⚠
    const EMERG_SQUAWKS = { '7700':'MAYDAY', '7600':'NORDO', '7500':'HIJACK' };
    function formatSquawk(sqk) {
      if (!sqk || sqk === '---') return '---';
      const emerg = EMERG_SQUAWKS[sqk];
      if (emerg) return '<span style="color:#ff2020;">' + sqk + ' \u26a0 ' + emerg + '</span>';
      return sqk;
    }

    // Above 10,000ft → Flight Level notation; below → feet QNH
    function formatAlt(alt) {
      if (typeof alt !== 'number') return '---';
      if (alt >= 10000) return 'FL' + String(Math.round(alt / 100)).padStart(3, '0');
      return alt.toLocaleString() + ' FT QNH';
    }


    // ── Flight phase detection ───────────────────────────────────────
    // Classifies aircraft by altitude + vertical speed.
    // Returns { label, color, cls } for the UI and colour bleed effect.
    function flightPhase(f) {
      const alt  = typeof f.alt_baro  === 'number' ? f.alt_baro  : null;
      const vspd = typeof f.baro_rate === 'number' ? f.baro_rate : 0;
      if (alt === null) return { label: '---', color: null, cls: '' };
      if (alt < 3000) {
        if (vspd < -200) return { label: '▼ LANDING',    color: '#ff6060', cls: 'phase-landing' };
        if (vspd >  200) return { label: '▲ TAKING OFF', color: '#60ff90', cls: 'phase-takeoff' };
        if (vspd < -50)  return { label: '~ APPROACH',   color: '#ffcc40', cls: 'phase-approach' };
      }
      if (vspd < -100) return { label: '▼ DESCENDING', color: '#ff9040', cls: 'phase-descending' };
      if (vspd >  100) return { label: '▲ CLIMBING',   color: '#60ff90', cls: 'phase-climbing' };
      return { label: '── OVERHEAD', color: null, cls: '' };
    }



    // ── Emergency squawk alert ───────────────────────────────────────
    const EMERG_LABELS = { '7700':'⚠ MAYDAY', '7600':'⚠ NORDO', '7500':'⚠ HIJACK' };
    let emergencyDismissed = new Set(); // squawks the user has dismissed this session

    function playEmergencyAlarm() {
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      // Two-tone urgent alarm
      [0, 0.35].forEach(offset => {
        const osc  = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(offset === 0 ? 660 : 880, audioCtx.currentTime + offset);
        gain.gain.setValueAtTime(0.4, audioCtx.currentTime + offset);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + offset + 0.3);
        osc.start(audioCtx.currentTime + offset);
        osc.stop(audioCtx.currentTime + offset + 0.3);
      });
    }

    function checkEmergencySquawks() {
      const emergFlights = flights.filter(f => {
        const sqk = f.squawk || '';
        return EMERG_LABELS[sqk] && !emergencyDismissed.has(f.hex + sqk);
      });

      const banner = document.getElementById('emerg-banner');
      if (!emergFlights.length) {
        banner.classList.remove('visible');
        return;
      }

      // Build banner text — list all emergency flights
      const lines = emergFlights.map(f => {
        const call  = (f.flight || '???').trim().toUpperCase();
        const label = EMERG_LABELS[f.squawk];
        return label + ' — ' + call + ' (' + f.squawk + ')';
      });
      banner.innerHTML = lines.join('<br>') + '<br><span style="font-size:0.65rem;opacity:0.6;">TAP TO DISMISS</span>';
      banner.classList.add('visible');
      playEmergencyAlarm();
    }

    function dismissEmergency() {
      // Mark all currently showing emergency flights as dismissed
      flights.forEach(f => {
        if (EMERG_LABELS[f.squawk || '']) emergencyDismissed.add(f.hex + f.squawk);
      });
      document.getElementById('emerg-banner').classList.remove('visible');
    }

    // ── Sound ────────────────────────────────────────────────────────
    // Synthesised radar ping via Web Audio API — no audio files needed.
    // AudioContext created on first user interaction (browser autoplay policy).
    let audioCtx = null;
    let soundOn  = false;

    function toggleSound() {
      soundOn = !soundOn;
      const btn = document.getElementById('sound-btn');
      btn.textContent = soundOn ? '[ON] SND' : '[OFF] SND';
      btn.classList.toggle('active', soundOn);
      if (soundOn && !audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }

    function playPing() {
      if (!soundOn || !audioCtx) return;
      const osc  = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain); gain.connect(audioCtx.destination);
      osc.type = 'sine';
      osc.frequency.setValueAtTime(880, audioCtx.currentTime);
      osc.frequency.exponentialRampToValueAtTime(440, audioCtx.currentTime + 0.3);
      gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
      osc.start(); osc.stop(audioCtx.currentTime + 0.5);
    }


    // ── Share URL ────────────────────────────────────────────────────
    // Copies a ?location= link to clipboard; opening it auto-geocodes on load.
    function shareUrl() {
      const url = new URL(window.location.href);
      url.searchParams.set('location', document.getElementById('location-input').value.trim() || locationName);
      const str = url.toString();
      const btn = document.querySelector('button[onclick="shareUrl()"]');
      if (navigator.clipboard) {
        navigator.clipboard.writeText(str).then(() => {
          const orig = btn.textContent;
          btn.textContent = '✓ COPIED';
          setTimeout(() => btn.textContent = orig, 2000);
        });
      } else {
        prompt('Copy this link:', str);
      }
    }


    // ── Session log ──────────────────────────────────────────────────
    // Records every unique aircraft (by hex) seen this session. Newest first.
    const sessionLog = new Map(); // hex → { call, type, timeStr, phase, airline, alt, gs, dist, interesting }

    function logFlight(f, phase, distKm) {
      const hex = f.hex || f.r || '';
      if (!hex) return;
      const call    = (f.flight || '---').trim().toUpperCase();
      const type    = formatType(f.t, f.category);
      const now     = new Date();
      const timeStr = now.getHours().toString().padStart(2,'0') + ':' + now.getMinutes().toString().padStart(2,'0');
      const airline = airlineFromCallsign(call);
      const alt     = typeof f.alt_baro === 'number' ? f.alt_baro : null;
      const gs      = typeof f.gs      === 'number' ? f.gs      : null;
      const flags   = detectInteresting(f);

      if (sessionLog.has(hex)) {
        // Update mutable fields that can change between refreshes
        const entry = sessionLog.get(hex);
        if (alt !== null && (entry.alt === null || alt > entry.alt)) entry.alt = alt;
        if (gs  !== null && (entry.gs  === null || gs  > entry.gs )) entry.gs  = gs;
        if (entry.dist === null || distKm < entry.dist) entry.dist = distKm;
      } else {
        if (sessionLog.size >= 500) sessionLog.delete(sessionLog.keys().next().value);
        sessionLog.set(hex, { call, type, timeStr, phase: phase.label, airline,
          alt, gs, dist: distKm, interesting: flags.length > 0 });
        renderLog();
      }
    }

    function renderLog() {
      const list    = document.getElementById('log-list');
      const count   = document.getElementById('log-count');
      const entries = Array.from(sessionLog.values()).reverse();
      count.textContent = entries.length;
      if (!entries.length) { list.innerHTML = '<span style="opacity:0.4">No flights recorded yet.</span>'; return; }
      list.innerHTML = entries.map(e =>
        '<div class="log-entry">' +
        '<span style="opacity:0.5">' + e.timeStr + '</span> ' +
        '<strong>' + e.call + '</strong> ' + e.type +
        ' <span style="opacity:0.6">' + e.phase + '</span></div>'
      ).join('');
    }

    // ── Statistics ───────────────────────────────────────────────────
    // Called after each render with the current live flights list.
    function updateStats(liveFlights) {
      const entries = Array.from(sessionLog.values());
      if (!entries.length) return;

      document.getElementById('stats-empty').style.display   = 'none';
      document.getElementById('stats-content').style.display = 'block';

      // Total seen & currently active
      document.getElementById('st-total').textContent  = entries.length;
      document.getElementById('st-active').textContent = liveFlights.length;

      // Busiest airline — tally by airline name, skip '---' and bare prefixes
      const airlineCounts = {};
      for (const e of entries) {
        const a = e.airline;
        if (a && a !== '---' && a.length > 3) airlineCounts[a] = (airlineCounts[a] || 0) + 1;
      }
      const topAirline = Object.entries(airlineCounts).sort((a,b) => b[1]-a[1])[0];
      if (topAirline) {
        document.getElementById('st-airline').textContent     = topAirline[0];
        document.getElementById('st-airline-sub').textContent = topAirline[1] + ' FLIGHT' + (topAirline[1] > 1 ? 'S' : '');
      }

      // Most common aircraft type — use the base type code, skip '---'
      const typeCounts = {};
      for (const e of entries) {
        const t = e.type.split(' (')[0]; // strip "(HEAVY)" etc.
        if (t && t !== '---') typeCounts[t] = (typeCounts[t] || 0) + 1;
      }
      const topType = Object.entries(typeCounts).sort((a,b) => b[1]-a[1])[0];
      if (topType) {
        document.getElementById('st-type').textContent     = topType[0];
        document.getElementById('st-type-sub').textContent = topType[1] + ' SEEN';
      }

      // Highest altitude
      const byAlt = entries.filter(e => e.alt !== null).sort((a,b) => b.alt - a.alt)[0];
      if (byAlt) {
        document.getElementById('st-maxalt').textContent     = formatAlt(byAlt.alt);
        document.getElementById('st-maxalt-sub').textContent = byAlt.call;
      }

      // Fastest aircraft
      const bySpd = entries.filter(e => e.gs !== null).sort((a,b) => b.gs - a.gs)[0];
      if (bySpd) {
        document.getElementById('st-maxspd').textContent     = Math.round(bySpd.gs) + ' KT';
        document.getElementById('st-maxspd-sub').textContent = bySpd.call;
      }

      // Closest approach
      const byDist = entries.filter(e => e.dist !== null).sort((a,b) => a.dist - b.dist)[0];
      if (byDist) {
        document.getElementById('st-closest').textContent     = byDist.dist.toFixed(1) + ' KM';
        document.getElementById('st-closest-sub').textContent = byDist.call;
      }

      // Interesting flights count
      const intCount = entries.filter(e => e.interesting).length;
      document.getElementById('st-interesting').textContent = intCount;
    }


    // ── Map ──────────────────────────────────────────────────────────

    let map, acMarker, acLine, acVector, acArrowHead, geofenceCircle, locationMarker;

    function initMap() {
      map = L.map('dm-map', { zoomControl: false }).setView([20, 0], 2); // world view until location is set
      L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '© OpenStreetMap © Carto', maxZoom: 14
      }).addTo(map);
    }

    // Draws or repositions the location marker + geofence ring.
    // Reuses existing layers to avoid flicker.
    function updateGeofenceCircle() {
      const t = THEMES[currentTheme];
      if (geofenceCircle) {
        geofenceCircle.setLatLng([locationLat, locationLon]);
        geofenceCircle.setRadius(geofenceKm * 1000); // Leaflet uses metres
      } else {
        geofenceCircle = L.circle([locationLat, locationLon], {
          radius: geofenceKm * 1000, color: t.main, fillColor: t.main,
          fillOpacity: 0.05, weight: 1, dashArray: '5 5'
        }).addTo(map);
      }
      if (locationMarker) {
        locationMarker.setLatLng([locationLat, locationLon]);
        locationMarker.getTooltip().setContent(locationName);
      } else {
        locationMarker = L.circleMarker([locationLat, locationLon], {
          radius: 5, color: '#ffffff', fillColor: '#ffffff', fillOpacity: 0.9, weight: 2
        }).addTo(map).bindTooltip(locationName, { permanent: true, direction: 'right', className: 'dm-callout' });
      }
      map.setView([locationLat, locationLon], 11);
    }

    function clearAircraftMarker() {
      if (acMarker)    { acMarker.remove();    acMarker = null; }
      if (acLine)      { acLine.remove();      acLine = null; }
      if (acVector)    { acVector.remove();    acVector = null; }
      if (acArrowHead) { acArrowHead.remove(); acArrowHead = null; }
    }

    // Returns a lat/lon point distKm away in direction bearingDeg (spherical trig).
    function destPoint(lat, lon, bearingDeg, distKm) {
      const R = 6371, d = distKm / R, brng = bearingDeg * Math.PI / 180;
      const lat1 = lat * Math.PI / 180, lon1 = lon * Math.PI / 180;
      const lat2 = Math.asin(Math.sin(lat1)*Math.cos(d) + Math.cos(lat1)*Math.sin(d)*Math.cos(brng));
      const lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d)*Math.cos(lat1), Math.cos(d)-Math.sin(lat1)*Math.sin(lat2));
      return [lat2 * 180/Math.PI, lon2 * 180/Math.PI];
    }

    // Places/moves the aircraft dot, dashed line to location, and
    // a speed-scaled heading vector with chevron arrowhead.
    function updateMap(lat, lon, callsign, groundSpeedKt, trackDeg) {
      const pos = [lat, lon];
      const t   = THEMES[currentTheme];

      // Aircraft dot
      if (acMarker) {
        acMarker.setLatLng(pos);
        acMarker.getTooltip().setContent(callsign);
      } else {
        acMarker = L.circleMarker(pos, { radius: 7, color: t.acMarker, fillColor: t.acMarker, fillOpacity: 1, weight: 2 })
          .addTo(map).bindTooltip(callsign, { permanent: true, direction: 'top', className: 'dm-callout' });
      }

      // Dashed line to location centre
      if (acLine) acLine.setLatLngs([pos, [locationLat, locationLon]]);
      else acLine = L.polyline([pos, [locationLat, locationLon]], { color: t.main, weight: 1, opacity: 0.4, dashArray: '4 6' }).addTo(map);

      // Speed-scaled heading vector + arrowhead (100kt=1km, clamped 0.5–8km)
      if (typeof groundSpeedKt === 'number' && groundSpeedKt > 0 && typeof trackDeg === 'number') {
        const vectorKm  = Math.max(0.5, Math.min(groundSpeedKt / 100, 8));
        const tip       = destPoint(lat, lon, trackDeg, vectorKm);
        const headKm    = vectorKm * 0.28;
        const leftWing  = destPoint(tip[0], tip[1], (trackDeg + 180 - 28 + 360) % 360, headKm);
        const rightWing = destPoint(tip[0], tip[1], (trackDeg + 180 + 28) % 360, headKm);
        const vs        = { color: t.acMarker, weight: 2, opacity: 0.7 };
        if (acVector) {
          acVector.setLatLngs([pos, tip]);
          acArrowHead.setLatLngs([leftWing, tip, rightWing]);
        } else {
          acVector    = L.polyline([pos, tip], vs).addTo(map);
          acArrowHead = L.polyline([leftWing, tip, rightWing], vs).addTo(map);
        }
      } else {
        if (acVector)    { acVector.remove();    acVector = null; }
        if (acArrowHead) { acArrowHead.remove(); acArrowHead = null; }
      }

      map.fitBounds(L.latLngBounds([pos, [locationLat, locationLon]]).pad(0.3));
    }


    // ── Altitude bar ─────────────────────────────────────────────────
    // Maps 0–45,000ft to a 0–100% CSS height on the right-edge bar.
    function updateAltBar(alt) {
      const fill = document.getElementById('alt-bar-fill');
      if (typeof alt !== 'number') { fill.style.height = '0%'; return; }
      fill.style.height = Math.min(100, Math.max(0, (alt / 45000) * 100)) + '%';
    }



    // ── Airport database ─────────────────────────────────────────────
    // ICAO and IATA codes → city name. Covers major airports worldwide.
    const AIRPORT_DB = {
      // Australia
      YSSY:'Sydney',YSAY:'Sydney',YMLB:'Melbourne',YMML:'Melbourne',YBBN:'Brisbane',
      YPPH:'Perth',YPAD:'Adelaide',YSCB:'Canberra',YBCS:'Cairns',YBHM:'Hamilton Is',
      YBTL:'Townsville',YBAS:'Alice Springs',YBDG:'Bendigo',YDBY:'Derby',
      YSNF:'Norfolk Is',YAGD:'Aganda',
      SYD:'Sydney',MEL:'Melbourne',BNE:'Brisbane',PER:'Perth',ADL:'Adelaide',
      CBR:'Canberra',CNS:'Cairns',OOL:'Gold Coast',TSV:'Townsville',DRW:'Darwin',
      HBA:'Hobart',LST:'Launceston',MKY:'Mackay',ROK:'Rockhampton',
      // Asia Pacific
      NZAA:'Auckland',NZCH:'Christchurch',NZWN:'Wellington',NZQN:'Queenstown',
      AKL:'Auckland',CHC:'Christchurch',WLG:'Wellington',ZQN:'Queenstown',
      WSSS:'Singapore',WSAP:'Singapore',SIN:'Singapore',
      VHHH:'Hong Kong',HKG:'Hong Kong',
      RJAA:'Tokyo',RJTT:'Tokyo',NRT:'Tokyo',HND:'Tokyo',
      RJBB:'Osaka',RJOO:'Osaka',KIX:'Osaka',ITM:'Osaka',
      RKSI:'Seoul',RKSS:'Seoul',ICN:'Seoul',GMP:'Seoul',
      RCTP:'Taipei',RCSS:'Taipei',TPE:'Taipei',TSA:'Taipei',
      VTBS:'Bangkok',VTBD:'Bangkok',BKK:'Bangkok',DMK:'Bangkok',
      WMKK:'Kuala Lumpur',KUL:'Kuala Lumpur',
      WADD:'Bali',WIII:'Jakarta',DPS:'Bali',CGK:'Jakarta',
      RPLL:'Manila',MNL:'Manila',
      VVTS:'Ho Chi Minh',VVNB:'Hanoi',SGN:'Ho Chi Minh',HAN:'Hanoi',
      ZBAA:'Beijing',ZGSZ:'Shenzhen',ZGGG:'Guangzhou',ZSPD:'Shanghai',
      ZSSS:'Shanghai',PEK:'Beijing',SZX:'Shenzhen',CAN:'Guangzhou',PVG:'Shanghai',SHA:'Shanghai',
      ZUCK:'Chongqing',ZUUU:'Chengdu',ZUUU:'Chengdu',CKG:'Chongqing',CTU:'Chengdu',
      OMDB:'Dubai',OMDW:'Dubai',DXB:'Dubai',DWC:'Dubai',
      OMAA:'Abu Dhabi',AUH:'Abu Dhabi',
      OTBD:'Doha',OTHH:'Doha',DOH:'Doha',
      OERK:'Riyadh',OEDF:'Dammam',RUH:'Riyadh',DMM:'Dammam',
      OJAM:'Amman',LLBG:'Tel Aviv',AMM:'Amman',TLV:'Tel Aviv',
      VIDP:'Delhi',VABB:'Mumbai',VOCB:'Chennai',VOBL:'Bangalore',
      DEL:'Delhi',BOM:'Mumbai',MAA:'Chennai',BLR:'Bangalore',
      VOMM:'Chennai',VECC:'Kolkata',CCU:'Kolkata',
      // Europe
      EGLL:'London',EGKK:'London',EGSS:'London',EGLC:'London',
      LHR:'London',LGW:'London',STN:'London',LCY:'London',LTN:'London',
      LFPG:'Paris',LFPO:'Paris',CDG:'Paris',ORY:'Paris',
      EHAM:'Amsterdam',AMS:'Amsterdam',
      EDDF:'Frankfurt',FRA:'Frankfurt',
      EDDM:'Munich',MUC:'Munich',
      LEMD:'Madrid',MAD:'Madrid',
      LEBL:'Barcelona',BCN:'Barcelona',
      LIRF:'Rome',LIMC:'Milan',FCO:'Rome',MXP:'Milan',LIN:'Milan',
      EGPH:'Edinburgh',EGPF:'Glasgow',EDI:'Edinburgh',GLA:'Glasgow',
      EIDW:'Dublin',DUB:'Dublin',
      EBBR:'Brussels',BRU:'Brussels',
      EKCH:'Copenhagen',CPH:'Copenhagen',
      ESSA:'Stockholm',ARN:'Stockholm',
      ENGM:'Oslo',OSL:'Oslo',
      EFHK:'Helsinki',HEL:'Helsinki',
      LSZH:'Zurich',ZRH:'Zurich',
      LSGG:'Geneva',GVA:'Geneva',
      LOWW:'Vienna',VIE:'Vienna',
      EPWA:'Warsaw',WAW:'Warsaw',
      LKPR:'Prague',PRG:'Prague',
      LHBP:'Budapest',BUD:'Budapest',
      LGAV:'Athens',ATH:'Athens',
      LTFM:'Istanbul',LTBA:'Istanbul',IST:'Istanbul',SAW:'Istanbul',
      // Americas
      KJFK:'New York',KLGA:'New York',KEWR:'New York',
      JFK:'New York',LGA:'New York',EWR:'New York',
      KLAX:'Los Angeles',LAX:'Los Angeles',
      KSFO:'San Francisco',SFO:'San Francisco',
      KORD:'Chicago',KMDW:'Chicago',ORD:'Chicago',MDW:'Chicago',
      KBOS:'Boston',BOS:'Boston',
      KMIA:'Miami',MIA:'Miami',
      KATL:'Atlanta',ATL:'Atlanta',
      KDFW:'Dallas',DFW:'Dallas',DAL:'Dallas',
      KDEN:'Denver',DEN:'Denver',
      KSEA:'Seattle',SEA:'Seattle',
      KLAS:'Las Vegas',LAS:'Las Vegas',
      KPHX:'Phoenix',PHX:'Phoenix',
      CYYZ:'Toronto',CYVR:'Vancouver',CYUL:'Montreal',
      YYZ:'Toronto',YVR:'Vancouver',YUL:'Montreal',
      SBGR:'São Paulo',SBGL:'Rio de Janeiro',
      GRU:'São Paulo',GIG:'Rio de Janeiro',
      SAEZ:'Buenos Aires',EZE:'Buenos Aires',
      SKBO:'Bogotá',BOG:'Bogotá',
      SEQM:'Quito',UIO:'Quito',
      // Africa
      FAOR:'Johannesburg',FACT:'Cape Town',
      JNB:'Johannesburg',CPT:'Cape Town',
      HECA:'Cairo',CAI:'Cairo',
      DNMM:'Lagos',LOS:'Lagos',
      HAAB:'Addis Ababa',ADD:'Addis Ababa',
      HSSS:'Khartoum',KRT:'Khartoum',
      FMMI:'Antananarivo',TNR:'Antananarivo',
    };

    function airportName(code) {
      if (!code) return null;
      code = code.trim().toUpperCase();
      return AIRPORT_DB[code] || code; // fall back to raw code if unknown
    }

    // Route cache — keyed by callsign, avoids repeat lookups
    const routeCache = new Map();

    function formatRoute(dep, arr) {
      if (!dep && !arr) return null;
      const depName = dep ? airportName(dep) : '?';
      const arrName = arr ? airportName(arr) : '?';
      return depName + ' → ' + arrName;
    }

    // Updates the ROUTE line in #info without re-rendering everything else
    function updateRouteDisplay(routeStr) {
      const info = document.getElementById('info');
      const existing = info.querySelector('.info-route');
      if (existing) existing.closest('.info-row').remove();
      if (routeStr) {
        const row = document.createElement('div');
        row.className = 'info-row';
        row.innerHTML = '<span class="info-label">ROUTE  </span><span class="info-value info-route">' + routeStr + '</span>';
        info.appendChild(row);
      }
    }

    // Looks up route by callsign from adsbdb.com, falls back gracefully.
    // Results are cached so each callsign is only fetched once per session.
    async function lookupRoute(callsign) {
      if (!callsign || callsign === '---') return null;
      if (routeCache.has(callsign)) return routeCache.get(callsign);

      try {
        const res = await fetch(
          'https://api.adsbdb.com/v0/callsign/' + callsign,
          { signal: timeoutSignal(5000) }
        );
        if (!res.ok) { routeCache.set(callsign, null); return null; }
        const data = await res.json();
        const r = data?.response?.flightroute;
        if (!r) { routeCache.set(callsign, null); return null; }

        // adsbdb returns IATA codes in origin/destination
        const dep = r.origin?.iata_code || r.origin?.icao_code || null;
        const arr = r.destination?.iata_code || r.destination?.icao_code || null;
        const route = formatRoute(dep, arr);
        routeCache.set(callsign, route);
        return route;
      } catch(e) {
        // Network / transient error — don't cache; allow retry on next render
        return null;
      }
    }

    // ── Interesting flight detection ─────────────────────────────────
    // Flags aircraft that are unusual or noteworthy.
    const MILITARY_PREFIXES = ['RCH','RRR','DUKE','VENUS','REACH','TOUGH','SWORD','IRON','STEEL',
      'NAVY','ARMY','USAF','RNZAF','RAAF','KIWI','ARROW','TOPCAT'];
    const MILITARY_TYPES = ['C130','C17','P8','E3CF','E3TF','E767','RC135','KC135','KC10',
      'C5M','V22','C2A','E2C','F16','F18','F35','B52','B1B','B2'];

    function detectInteresting(f) {
      const flags = [];
      const call  = (f.flight || '').trim().toUpperCase();
      const t     = (f.t || '').toUpperCase();
      const c     = (f.category || '').toUpperCase();
      const gs    = typeof f.gs === 'number' ? f.gs : 0;
      const alt   = typeof f.alt_baro === 'number' ? f.alt_baro : 0;

      // Military callsign prefix
      if (MILITARY_PREFIXES.some(p => call.startsWith(p))) flags.push('★ MILITARY CALLSIGN');
      // Military aircraft type
      if (MILITARY_TYPES.includes(t)) flags.push('★ MILITARY TYPE: ' + t);
      // High performance / supersonic candidate
      if (c === 'A6' || gs > 520) flags.push('★ HIGH SPEED: ' + Math.round(gs) + ' KT');
      // Extremely high altitude
      if (alt > 43000) flags.push('★ VERY HIGH ALT: FL' + String(Math.round(alt/100)).padStart(3,'0'));
      // No callsign — anonymous aircraft
      if (!call || call === '---') flags.push('★ NO CALLSIGN (ANON)');
      // Private registration pattern (VH-Oxx = Qantas fleet, but VH-Xxx = private)
      const reg = (f.r || '').toUpperCase();
      const isMilitary = MILITARY_PREFIXES.some(p => call.startsWith(p)) || MILITARY_TYPES.includes(t);
      if (reg && !call.match(/^[A-Z]{3}\d/) && !isMilitary) flags.push('★ PRIVATE / CHARTER');
      // Bizjet types
      if (['GL5T','GLEX','GLF6','GLF5','GLF4','FA7X','FA8X','C25A','C25B','C56X','C750'].includes(t)) {
        flags.push('★ BIZJET: ' + (AIRCRAFT_TYPE_DB[t] || t));
        // Remove duplicate private flag if present
        const idx = flags.indexOf('★ PRIVATE / CHARTER');
        if (idx > -1) flags.splice(idx, 1);
      }

      return flags;
    }

    function updateInterestingBadge(f) {
      const badge = document.getElementById('interesting-badge');
      const flags = detectInteresting(f);
      // Only show 2 most relevant flags to keep it tidy
      if (flags.length) {
        badge.innerHTML = flags.slice(0, 2).join('<br>');
        badge.classList.add('visible');
      } else {
        badge.classList.remove('visible');
      }
    }


    // ── Intercept timer ──────────────────────────────────────────────
    // Calculates bearing from aircraft to location and compares with track
    // to estimate if it's inbound, and how long until overhead.
    function bearingTo(lat1, lon1, lat2, lon2) {
      const dLon = (lon2 - lon1) * Math.PI / 180;
      const la1  = lat1 * Math.PI / 180;
      const la2  = lat2 * Math.PI / 180;
      const y = Math.sin(dLon) * Math.cos(la2);
      const x = Math.cos(la1) * Math.sin(la2) - Math.sin(la1) * Math.cos(la2) * Math.cos(dLon);
      return (Math.atan2(y, x) * 180 / Math.PI + 360) % 360;
    }

    function updateIntercept(f, distKm) {
      const wrap = document.getElementById('intercept-wrap');
      if (!f.track || !f.gs || f.gs < 30) {
        wrap.innerHTML = '';
        return;
      }
      // Bearing from aircraft TO the location
      const bearingToLoc = bearingTo(f.lat, f.lon, locationLat, locationLon);
      // Angular difference between where the aircraft is headed and where we are
      let angleDiff = bearingToLoc - f.track;
      if (angleDiff >  180) angleDiff -= 360;
      if (angleDiff < -180) angleDiff += 360;

      // Speed component closing toward location (cos of angle diff)
      const closingKt   = f.gs * Math.cos(angleDiff * Math.PI / 180);
      const closingKmh  = closingKt * 1.852;

      if (Math.abs(angleDiff) < 70 && closingKmh > 20) {
        // Inbound — calculate ETA
        const hoursToOverhead = distKm / closingKmh;
        const secsToOverhead  = Math.round(hoursToOverhead * 3600);
        let etaStr;
        if (secsToOverhead < 60)       etaStr = secsToOverhead + 'S';
        else if (secsToOverhead < 3600) etaStr = Math.floor(secsToOverhead/60) + 'M ' + (secsToOverhead%60) + 'S';
        else                            etaStr = Math.floor(secsToOverhead/3600) + 'H ' + Math.floor((secsToOverhead%3600)/60) + 'M';
        wrap.innerHTML = '<span class="intercept-closing">⟶ INBOUND — OVERHEAD IN ~' + etaStr + '</span>';
      } else if (distKm < 2) {
        wrap.innerHTML = '<span class="intercept-overhead">◉ DIRECTLY OVERHEAD NOW</span>';
      } else {
        // Receding or crossing
        const absAngle = Math.abs(angleDiff);
        if (absAngle < 110) {
          wrap.innerHTML = '<span class="intercept-closing">↗ CROSSING — CLOSEST IN ~' +
            Math.round(distKm / (f.gs * 1.852 / 3600)) + 'S</span>';
        } else {
          wrap.innerHTML = '<span class="intercept-receding">↙ RECEDING</span>';
        }
      }
    }


    // ── Keyboard help overlay ────────────────────────────────────────
    function showKbdHelp() {
      const overlay = document.getElementById('kbd-overlay');
      overlay.classList.add('visible');
      overlay.setAttribute('aria-hidden', 'false');
      document.getElementById('kbd-close').focus();
    }
    function hideKbdHelp() {
      const overlay = document.getElementById('kbd-overlay');
      overlay.classList.remove('visible');
      overlay.setAttribute('aria-hidden', 'true');
      document.querySelector('button[onclick="showKbdHelp()"]').focus();
    }
    // Focus trap inside the keyboard help panel
    document.getElementById('kbd-panel').addEventListener('keydown', function(e) {
      if (e.key !== 'Tab') return;
      const focusable = Array.from(this.querySelectorAll('button, [href], input, [tabindex]:not([tabindex="-1"])'));
      if (!focusable.length) return;
      const first = focusable[0], last = focusable[focusable.length - 1];
      if (e.shiftKey) { if (document.activeElement === first) { e.preventDefault(); last.focus(); } }
      else            { if (document.activeElement === last)  { e.preventDefault(); first.focus(); } }
    });


    // ── Render ───────────────────────────────────────────────────────
    // Formats and displays all data for one aircraft from the API.
    // Key API fields: flight, r (reg), t (type), hex, lat, lon,
    //                 alt_baro (ft), gs (kt), baro_rate (fpm), track (°), squawk, category,
    //                 dep, arr (ICAO departure/arrival), orig_iata, dest_iata

    let prevTopHex = null; // used to detect when the #1 aircraft changes (triggers ping)

    function render(f) {
      const ctr     = '[' + (flightIndex+1) + '/' + flights.length + ']';
      const distLoc = haversineKm(locationLat, locationLon, f.lat, f.lon);
      const altStr  = formatAlt(f.alt_baro);
      const spd     = f.gs        != null ? Math.round(f.gs) + ' KT' : '---';
      const vs      = f.baro_rate != null ? (f.baro_rate > 0 ? '+' : '') + f.baro_rate + ' FPM' : '---';
      const hdg     = f.track     != null ? Math.round(f.track) + '°' : '---';
      const call    = (f.flight || '---').trim().toUpperCase();
      const typeStr = formatType(f.t, f.category);
      const reg     = (f.r || '---').toUpperCase();
      const sqkStr  = formatSquawk(f.squawk || '---');
      const airline = airlineFromCallsign(call);

      // Callsign links to FlightAware
      const callLink = call !== '---'
        ? '<a href="https://www.flightaware.com/live/flight/' + call + '" target="_blank" rel="noopener" style="color:inherit;text-decoration:underline;">' + call + '</a>'
        : '---';

      const phase     = flightPhase(f);
      const phaseHtml = phase.color
        ? '<span style="color:' + phase.color + ';">' + phase.label + '</span>'
        : phase.label;

      document.getElementById('info-wrap').className = phase.cls || '';

      // Info block uses a fixed-width label approach for clean column alignment
      // Labels are padded to 7 chars so values start at the same column.
      const R = (label, value, extra) => {
        const padded = (label + '       ').slice(0, 7);
        const lspan  = '<span class="info-label">' + padded + '</span>';
        const vspan  = extra
          ? '<span class="info-value ' + extra + '">' + value + '</span>'
          : '<span class="info-value">' + value + '</span>';
        return '<div class="info-row">' + lspan + vspan + '</div>';
      };

      // Try proxy-provided pre-formatted route, fall back to inline ADS-B codes
      const inlineDep = f.dep || f.orig_iata || null;
      const inlineArr = f.arr || f.dest_iata || null;
      const inlineRoute = f.route || formatRoute(inlineDep, inlineArr);

      let infoHtml =
        R('FLIGHT', callLink) +
        R('REG',    reg) +
        R('TYPE',   typeStr) +
        R('AIRLINE', airline) +
        R('PHASE',   phase.color
            ? '<span style="color:' + phase.color + ';">' + phase.label + '</span>'
            : phase.label) +
        (inlineRoute ? R('ROUTE', '<span class="info-route">' + inlineRoute + '</span>') : '');

      document.getElementById('info').innerHTML = infoHtml;

      // If no inline route, async lookup from adsbdb (updates display when ready)
      if (!inlineRoute && call !== '---') {
        lookupRoute(call).then(route => {
          // Only update if this flight is still the one being displayed
          if (flights[flightIndex] === f) updateRouteDisplay(route);
        });
      }

      document.getElementById('d-hdg').textContent  = hdg;
      document.getElementById('d-sqk').innerHTML    = sqkStr;

      document.getElementById('counter').textContent = ctr;
      updateAltBar(f.alt_baro);

      // ── Colour-code data values ──────────────────────────────────
      // Altitude colour bands
      const altEl = document.getElementById('d-alt');
      altEl.textContent = altStr;
      altEl.className = 'data-value';
      if (typeof f.alt_baro === 'number') {
        if      (f.alt_baro < 1000)  altEl.classList.add('alt-ground');
        else if (f.alt_baro < 10000) altEl.classList.add('alt-low');
        else if (f.alt_baro < 35000) altEl.classList.add('alt-mid');
        else if (f.alt_baro < 45000) altEl.classList.add('alt-high');
        else                          altEl.classList.add('alt-vhigh');
      }

      // Speed colour bands
      const spdEl = document.getElementById('d-spd');
      spdEl.textContent = spd;
      spdEl.className = 'data-value';
      if (typeof f.gs === 'number') {
        if      (f.gs < 150) spdEl.classList.add('spd-slow');
        else if (f.gs < 500) spdEl.classList.add('spd-normal');
        else                  spdEl.classList.add('spd-fast');
      }

      // Vertical speed colour
      const vsEl = document.getElementById('d-vs');
      vsEl.innerHTML = vs;
      vsEl.className = 'data-value';
      if (typeof f.baro_rate === 'number') {
        if      (f.baro_rate >  100) vsEl.classList.add('vs-climbing');
        else if (f.baro_rate < -100) vsEl.classList.add('vs-descending');
        else                          vsEl.classList.add('vs-level');
      }

      // Distance proximity colour
      const distEl = document.getElementById('d-dist');
      distEl.textContent = distLoc.toFixed(1) + ' KM';
      distEl.className = 'data-value';
      if      (distLoc < 3)  distEl.classList.add('dist-close');
      else if (distLoc < 10) distEl.classList.add('dist-medium');
      else                    distEl.classList.add('dist-far');

      // Play ping when a new aircraft becomes #1 closest
      if (flightIndex === 0 && f.hex !== prevTopHex) {
        if (prevTopHex !== null) playPing();
        prevTopHex = f.hex;
      }

      logFlight(f, phase, distLoc);
      fetchPhoto(reg, f.hex || '', (f.t || '').toUpperCase());
      updateMap(f.lat, f.lon, call, f.gs, f.track);
      updateInterestingBadge(f);
      updateIntercept(f, distLoc);
    }


    // ── Photo ────────────────────────────────────────────────────────
    // Fetches from Planespotters.net by hex/reg. Caches last reg to avoid re-fetching.
    let lastPhotoReg = null;

    async function fetchPhoto(reg, hex, type) {
      if (!reg || reg === '---') { clearPhoto(); return; }
      if (reg === lastPhotoReg)  return;
      lastPhotoReg = reg;
      clearPhoto();
      try {
        const res = await fetch(
          'https://api.planespotters.net/pub/photos/hex/' + hex + '?reg=' + reg + '&icaoType=' + type,
          { signal: timeoutSignal(6000) }
        );
        if (!res.ok) return;
        const data  = await res.json();
        const photo = data.photos && data.photos[0];
        if (!photo) return;
        const src    = photo.thumbnail_large?.src || photo.thumbnail?.src;
        const credit = photo.photographer ? '© ' + photo.photographer : '';
        if (src) setPhoto(src, credit, reg, type);
      } catch(e) {}
    }

    function setPhoto(src, credit, reg, typeStr) {
      const desc = [typeStr, reg].filter(Boolean).join(' ') || 'Aircraft';
      document.getElementById('dm-photo').src = src;
      document.getElementById('dm-photo').alt = desc;
      document.getElementById('photo-wrap').style.display = 'block';
      document.getElementById('dm-photo-credit').textContent = credit;
    }
    function clearPhoto() {
      document.getElementById('dm-photo').src = '';
      document.getElementById('dm-photo').alt = '';
      document.getElementById('photo-wrap').style.display = 'none';
      document.getElementById('dm-photo-credit').textContent = '';
    }


    // ── Navigation ───────────────────────────────────────────────────
    function go(n) { if (flights.length) { flightIndex = (n + flights.length) % flights.length; render(flights[flightIndex]); } }
    function next() { go(flightIndex + 1); }
    function prev() { go(flightIndex - 1); }
    function manualRefresh() { secs = 15; fetchFlights(); }


    // ── Auto-refresh timer ───────────────────────────────────────────
    let secs = 15;
    setInterval(() => {
      if (!locationLat && !locationLon) return;
      secs--;
      document.getElementById('refresh-timer').textContent = 'REFRESH IN ' + secs + 'S';
      if (secs <= 0) fetchFlights();
    }, 1000);


    // ── Geocoding ────────────────────────────────────────────────────
    // Converts any location string to lat/lon via Nominatim (OSM).
    // Works worldwide — no country restriction.
    async function geocodeLocation(name) {
      const url = 'https://nominatim.openstreetmap.org/search?q=' + encodeURIComponent(name) + '&format=json&limit=1';
      const res = await fetch(url, { signal: timeoutSignal(8000), headers: { 'Accept-Language': 'en' } });
      if (!res.ok) throw new Error('Geocoding request failed');
      const data = await res.json();
      if (!data.length) throw new Error('Location not found: ' + name);
      return { lat: parseFloat(data[0].lat), lon: parseFloat(data[0].lon) };
    }

    async function setLocation() {
      const input = document.getElementById('location-input').value.trim();
      if (!input) return;
      document.getElementById('error').textContent = 'LOCATING ' + input.toUpperCase() + '...';
      try {
        const { lat, lon } = await geocodeLocation(input);
        locationName = input.toUpperCase();
        locationLat  = lat;
        locationLon  = lon;
        document.getElementById('location-display').textContent = locationName;
        document.getElementById('error').textContent = '';
        lastPhotoReg = null;
        prevTopHex   = null;
        clearAircraftMarker();
        updateGeofenceCircle();
        try { localStorage.setItem('location', JSON.stringify({ name: input, lat, lon })); } catch(e) {}
        fetchWeather();
        await fetchFlights();
      } catch(e) {
        document.getElementById('error').textContent = 'LOCATION ERR: ' + e.message;
      }
    }


    // ── Fetch weather ─────────────────────────────────────────────────
    const WEATHER_URL = 'https://api.overheadtracker.com/weather?lat={LAT}&lon={LON}';

    async function fetchWeather() {
      if (!locationLat && !locationLon) return;
      try {
        const url = WEATHER_URL.replace('{LAT}', locationLat).replace('{LON}', locationLon);
        const res = await fetch(url, { signal: timeoutSignal(8000) });
        if (!res.ok) return;
        const d = await res.json();
        document.getElementById('wx-temp').textContent =
          Math.round(d.temp) + '\u00b0C (FEELS ' + Math.round(d.feels_like) + '\u00b0C)';
        document.getElementById('wx-cond').textContent = (d.condition || '').toUpperCase();
        document.getElementById('wx-wind').textContent =
          Math.round(d.wind_speed) + ' KM/H ' + d.wind_cardinal;
        document.getElementById('wx-hum').textContent = d.humidity + '% RH';
        document.getElementById('wx-uv').textContent =
          'UV ' + (d.uv_index != null ? d.uv_index.toFixed(1) : '---');
        document.getElementById('wx-strip').style.display = '';
      } catch(e) { /* weather is best-effort; fail silently */ }
    }

    // Refresh weather every 15 minutes
    setInterval(() => { if (locationLat || locationLon) fetchWeather(); }, 15 * 60 * 1000);

    // ── Fetch flights ────────────────────────────────────────────────
    // Queries proxy first, falls back to airplanes.live directly if proxy is down.
    // Aborts any in-progress request first to prevent stale data overwrites.
    const PROXY_URL  = 'https://api.overheadtracker.com/flights?lat={LAT}&lon={LON}&radius={R}';
    const DIRECT_URL = 'https://api.airplanes.live/v2/point/{LAT}/{LON}/{R}';

    function buildUrl(template) {
      return template
        .replace(/{LAT}/g, locationLat)
        .replace(/{LON}/g, locationLon)
        .replace(/{R}/g,   apiRadiusNm());
    }

    async function fetchFlights() {
      if (fetchController) fetchController.abort();
      fetchController = new AbortController();
      const signal = fetchController.signal;
      document.getElementById('error').textContent = '';
      document.getElementById('proxy-status').textContent = '';
      document.getElementById('info-wrap').classList.add('fetching');
      document.getElementById('fetch-dot').classList.add('active');
      try {
        // Try proxy first (6s timeout); fall back to airplanes.live directly if it fails
        let res;
        try {
          const proxySignal = (AbortSignal.any && AbortSignal.timeout)
            ? AbortSignal.any([signal, timeoutSignal(6000)])
            : signal;
          res = await fetch(buildUrl(PROXY_URL), { signal: proxySignal });
          if (!res.ok) throw new Error('proxy HTTP ' + res.status);
          document.getElementById('proxy-status').textContent = '[OK] VIA PROXY';
        } catch(proxyErr) {
          if (proxyErr.name === 'AbortError' && !signal.aborted) {
            // Timeout hit — fall through to direct
          } else if (signal.aborted) {
            throw proxyErr; // manual abort, don't fall back
          }
          console.warn('Proxy failed, falling back to airplanes.live:', proxyErr.message);
          document.getElementById('proxy-status').textContent = '[!] DIRECT (PROXY DOWN)';
          res = await fetch(buildUrl(DIRECT_URL), { signal });
          if (!res.ok) throw new Error('HTTP ' + res.status);
        }
        const data = await res.json();
        let ac = (data.ac || []).filter(f =>
          typeof f.alt_baro === 'number' && f.alt_baro >= altFloorFt &&
          typeof f.lat === 'number' && typeof f.lon === 'number' &&
          haversineKm(locationLat, locationLon, f.lat, f.lon) <= geofenceKm
        );
        ac.sort((a, b) =>
          haversineKm(locationLat, locationLon, a.lat, a.lon) -
          haversineKm(locationLat, locationLon, b.lat, b.lon)
        );
        if (!ac.length) {
          clearAircraftMarker(); clearPhoto();
          document.getElementById('info').textContent    = 'NO AIRCRAFT ABOVE ' + locationName + '.\nTRY INCREASING GEOFENCE OR LOWERING ALT FLOOR.\nNEXT CHECK IN 15S.';
          ['d-alt','d-spd','d-vs','d-hdg','d-dist','d-sqk'].forEach(id => document.getElementById(id).textContent = '---');
          document.getElementById('counter').textContent = '';
          document.getElementById('info-wrap').className = '';
          updateAltBar(null);
          return;
        }
        const prevHex = flights[flightIndex]?.hex;
        flights = ac;
        const restored = prevHex ? ac.findIndex(f => f.hex === prevHex) : -1;
        flightIndex = restored >= 0 ? restored : 0;
        checkEmergencySquawks();
        render(flights[flightIndex]);
        updateStats(flights);
      } catch(e) {
        if (e.name === 'AbortError') return;
        console.error(e);
        document.getElementById('error').textContent = 'ERR: ' + e.message;
        document.getElementById('info').textContent  = '^ SEE ABOVE';
      } finally {
        secs = 15;
        document.getElementById('info-wrap').classList.remove('fetching');
        document.getElementById('fetch-dot').classList.remove('active');
      }
    }


    // ── Keyboard navigation ──────────────────────────────────────────
    // Arrow keys browse flights; suppressed while any input element is focused.
    document.addEventListener('keydown', e => {
      const typing = document.activeElement === document.getElementById('location-input')
                  || document.activeElement.tagName === 'INPUT';
      if (typing) return;
      if (e.key === 'ArrowRight') { next(); return; }
      if (e.key === 'ArrowLeft')  { prev(); return; }
      if (e.key === 'Home')       { go(0); return; }
      if (e.key === 'r' || e.key === 'R') { manualRefresh(); return; }
      if (e.key === 's' || e.key === 'S') { toggleSound(); return; }
      if (e.key === '?')  { showKbdHelp(); return; }
      if (e.key === 'Escape') { hideKbdHelp(); return; }
    });
    document.getElementById('location-input').addEventListener('keydown', e => {
      if (e.key === 'Enter') setLocation();
    });


    // ── Sliders ──────────────────────────────────────────────────────
    // Each slider restores its saved value on load, then updates state + localStorage on drag.
    // They do NOT trigger an API fetch — the next 15s refresh picks up the new value.

    // Geofence
    (function () {
      try {
        const saved = parseInt(localStorage.getItem('geofenceKm'), 10);
        if (saved >= 2 && saved <= 20) {
          geofenceKm = saved;
          document.getElementById('geofence-slider').value = saved;
          document.getElementById('geofence-label').textContent = saved + ' KM';
        }
      } catch(e) {}
    })();
    document.getElementById('geofence-slider').addEventListener('input', function () {
      geofenceKm = parseInt(this.value, 10);
      document.getElementById('geofence-label').textContent = geofenceKm + ' KM';
      if (geofenceCircle) updateGeofenceCircle();
      try { localStorage.setItem('geofenceKm', geofenceKm); } catch(e) {}
    });
    document.getElementById('geofence-slider').addEventListener('change', function () {
      if (locationLat !== 0 || locationLon !== 0) manualRefresh();
    });

    // Altitude floor
    (function () {
      try {
        const saved = parseInt(localStorage.getItem('altFloorFt'), 10);
        if (saved >= 200 && saved <= 5000) {
          altFloorFt = saved;
          document.getElementById('altfloor-slider').value = saved;
          document.getElementById('altfloor-label').textContent = saved + ' FT';
        }
      } catch(e) {}
    })();
    document.getElementById('altfloor-slider').addEventListener('input', function () {
      altFloorFt = Math.max(200, parseInt(this.value, 10));
      document.getElementById('altfloor-label').textContent = altFloorFt + ' FT';
      try { localStorage.setItem('altFloorFt', altFloorFt); } catch(e) {}
    });
    document.getElementById('altfloor-slider').addEventListener('change', function () {
      if (locationLat !== 0 || locationLon !== 0) manualRefresh();
    });


    // ── Share link: auto-geocode on load ─────────────────────────────
    // If opened with ?location= (via SHARE button), geocode it automatically.
    // Small delay ensures the map is initialised before setLocation() runs.
    (function () {
      const s = new URLSearchParams(window.location.search).get('location');
      if (s) setTimeout(() => setLocation(), 50);
    })();


    // ── Start ────────────────────────────────────────────────────────
    initMap();
    if (locationLat !== 0 || locationLon !== 0) fetchFlights(); // only fetch if a location is set
    else document.getElementById('info').textContent = 'ENTER A LOCATION TO BEGIN.\nTYPE A CITY OR ADDRESS, THEN PRESS ENTER OR TAP [SET LOC].';

  </script>
</body>
</html>
